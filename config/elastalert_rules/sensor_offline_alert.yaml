# ElastAlert Rule: Sensor Offline Detection

name: Sensor Offline Alert
type: flatline
index: iot-logs*

# Alert when no data received for 5 minutes
threshold: 0
timeframe:
  minutes: 5

query_key: sensor_id

filter:
- query:
    query_string:
      query: "sensor_type:* AND status:*"

alert:
  - email

email:
  - ops@example.com

alert_subject: "ðŸ“¡ Sensor Offline: {sensor_id}"
alert_text: |
  Sensor has stopped sending data!
  
  Sensor ID: {sensor_id}
  Last seen: {timestamp}
  Location: {location}
  
  No data received for 5 minutes.
  Please check sensor connectivity.